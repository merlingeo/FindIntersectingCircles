<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MoreCircles</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <style>
        body,.circle-container{
            width: 100vw;
            height: 100vh;
            margin: 0px;

        }
        .circle{
            position: absolute;
            /* width: 200px;
            height: 200px; */
            border-radius: 50%;
            border: 2px solid red;
        }

        .highlighted{
            opacity: 0.5;
            background-color: pink;
        }
    </style>
    <script>
        var circlesArray=[];
        document.addEventListener('click',function(){

            x =event.clientX;
            y=event.clientY;

            createCircle(x,y,randomRadiusGenerator);


        })
        
        function createCircle(posX,posY,newRadius){
            let r= newRadius();
            let circleId = circlesArray.length;


            $('.circle-container').append(`<div class="circle" id='circle${circleId}'></div>`)

            $(`#circle${circleId}`).css({
                height : 2*r+'px',
                width : 2*r,
                left: (posX - r)+'px',
                top:(posY - r)+'px',
            })

            let newCircleDet ={
                x:posX - r,
                y:posY - r, 
                r:r,
                id : circleId
            }

            checkIntersecting(newCircleDet,circlesArray)  
            
        }

        function checkIntersecting(newCircle, allOtherCircles){
            
            if(allOtherCircles.length <1){
                allOtherCircles.push(newCircle);
            }else{
                allOtherCircles.forEach(element => {
                    sumRadius = element.r +newCircle.r

                    if(isIntersecting(element.x,element.y ,newCircle.x,newCircle.y,sumRadius)){
                        $(`#circle${newCircle.id},#circle${element.id}`).addClass('highlighted');
                    }

                }); 
                allOtherCircles.push(newCircle);         
            }
        }

        function isIntersecting(x1,y1,x2,y2,radiusSum){
            const dx = x1-x2;
            const dy = y1-y2;
            const distance = Math.sqrt(dx * dx + dy * dy);
            return distance < radiusSum;
        }
        function randomRadiusGenerator(){
            return Math.floor(Math.random()* 120) + 20;
        }
    </script>
</head>
<body>
    <div class="circle-container">

    </div>
</body>
</html>